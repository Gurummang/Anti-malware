package com.GASB.anti_malware.controller;

import com.GASB.anti_malware.model.dto.response.ResponseDto;
import com.GASB.anti_malware.service.StoredFileService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.*;

@RestController
//@RequestMapping("/api/v1/files")
public class FileController {

    private final StoredFileService storedFileService;

    @Autowired
    public FileController(StoredFileService storedFileService){
        this.storedFileService = storedFileService;
    }

//    @GetMapping
//    public ResponseDto<ResponseDto.FileListResponse> getFileList() {
//        try {
//            ResponseDto.FileListResponse fileListResponse = storedFileService.getFileList();
//            return ResponseDto.ofSuccess(fileListResponse);
//        } catch (Exception e){
//            return ResponseDto.ofFail(e.getMessage());
//        }
//    }

//    @PostMapping("/save")
//    public ResponseDto<String> storeFile(@RequestBody List<StoredFile> storedFiles) {
//        try {// 이미 존재하는 해시값인지 확인
//            StringBuilder responseMessage = new StringBuilder();
//            for (StoredFile storedFile : storedFiles) {
//                if (storedFileService.existsBySaltedHash(storedFile.getSaltedHash())) {
//                    // 중복일 경우, 성공 응답 반환
//                    return ResponseDto.ofSuccess("File already exists.");
//                }
//
//                // 중복이 아닐 경우, 저장 처리
//                storedFileService.saveStoredFile(storedFile);
//
//                responseMessage.append("File stored successfully ").append(storedFile.getSavePath()).append(". ");
//
//            }
//            return ResponseDto.ofSuccess(responseMessage.toString());
//        } catch (Exception e){
//            return ResponseDto.ofFail(e.getMessage());
//        }
//    }
}
